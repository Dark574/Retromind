<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Retromind.ViewModels"
             xmlns:ext="clr-namespace:Retromind.Extensions"
             xmlns:video="using:Retromind.Helpers.Video"
             xmlns:helpers="using:Retromind.Helpers"
             x:DataType="vm:BigModeViewModel"
             Background="#101010"

             ext:ThemeProperties.Name="Default System Layout"
             ext:ThemeProperties.Author="Retromind"
             ext:ThemeProperties.Version="0.1.0"
             ext:ThemeProperties.VideoEnabled="True">

    <!-- Very simple, neutral system layout:
         - large system title on the left
         - centered "monitor" with VideoSlot
         - basic stats at the bottom -->

    <Grid RowDefinitions="*,Auto"
          ColumnDefinitions="*,2.3*"
          Margin="40">

        <!-- LEFT: system title and short info -->
        <StackPanel Grid.Row="0"
                    Grid.Column="0"
                    VerticalAlignment="Center"
                    Spacing="8">
            <!-- Current system name (SelectedCategory is the active node in system view) -->
            <Image helpers:AsyncImageHelper.Url="{Binding SelectedCategory.PrimaryLogoPath}"
                   Height="80"
                   Stretch="Uniform"
                   HorizontalAlignment="Center"
                   IsVisible="{Binding SelectedCategory.PrimaryLogoPath,
                                                   Converter={x:Static helpers:StringConverters.IsNotNullOrEmpty}}"/>

            <!-- Fallback: text title if no logo -->
            <TextBlock Text="{Binding SelectedCategory.Name}"
                       FontSize="40"
                       FontWeight="Bold"
                       Foreground="White"
                       TextTrimming="CharacterEllipsis"
                       MaxWidth="260"
                       IsVisible="{Binding SelectedCategory.PrimaryLogoPath,
                                                       Converter={x:Static helpers:StringConverters.IsNullOrEmpty}}" />
        </StackPanel>

        <!-- RIGHT: logo / title + simple "monitor" with video preview -->
        <Grid Grid.Row="0"
              Grid.Column="1"
              HorizontalAlignment="Center"
              VerticalAlignment="Center"
              MinWidth="720"
              MinHeight="360">
            <!-- Outer frame -->
            <Border Background="#181818"
                    CornerRadius="16"
                    Padding="24"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch">
                <!-- Split into: left = logo/name, right = screen -->
                <Grid ColumnDefinitions="Auto,*"
                      RowDefinitions="*">
                    <!-- RIGHT SIDE: monitor with video -->
                    <Grid Grid.Column="1"
                          RowDefinitions="*,Auto">
                        <!-- "Screen" area with video + fallback text -->
                        <Border Grid.Row="0"
                                Width="640"
                                Height="360"
                                Background="#181818"
                                CornerRadius="8"
                                Padding="0"
                                Margin="0,0,0,12"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                            <Grid>
                                <!-- Fallback text (visible when no video is present) -->
                                <TextBlock Text="No preview video"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Foreground="#505050"
                                           FontSize="18" />

                                <!-- Video area -->
                                <video:VideoSurfaceControl Surface="{Binding MainVideoSurface}"
                                                           Stretch="Uniform"
                                                           HorizontalAlignment="Stretch"
                                                           VerticalAlignment="Stretch"
                                                           IsVisible="{Binding MainVideoHasContent}" />
                            </Grid>
                        </Border>

                        <!-- Basic stats below the screen -->
                        <StackPanel Grid.Row="1"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Right"
                                    Spacing="12">
                            <StackPanel Orientation="Horizontal" Spacing="4">
                                <TextBlock Text="Games:"
                                           Foreground="#AAAAAA"
                                           FontSize="14" />
                                <TextBlock Text="{Binding SelectedCategory.Items.Count}"
                                           Foreground="#FFFFFF"
                                           FontSize="14" />
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </Grid>
            </Border>
        </Grid>
        
    </Grid>
</UserControl>